{% extends "base.html" %}
{% block content %}
<h2>Appointment History</h2>
<div class="card p-3">
  <table class="table">
    <thead><tr><th>Date</th><th>Action</th><th>Appointment</th><th>Changed By</th><th>Changes</th><th>Actions</th></tr></thead>
    <tbody>
      {% for h in history %}
        <tr>
          <td>{{ h.timestamp|date:"M d, Y g:i A" }}</td>
          <td><span class="badge bg-info">{{ h.action }}</span></td>
          <td>{{ h.appointment.address|truncatechars:30 }}</td>
          <td>{{ h.changed_by.username|default:'â€”' }}</td>
          <td><small>{{ h.changes|linebreaksbr }}</small></td>
          <td><a href="{% url 'core:pickup_detail' h.appointment.pk %}" class="btn btn-sm btn-outline-primary">View</a></td>
        </tr>
      {% empty %}
        <tr><td colspan="6">No history records yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}



