<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Waste Care - Sustainable Waste Management{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link href="/static/css/theme.css" rel="stylesheet">
    
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    {% include "includes/navbar.html" %}
    
    <main class="container-fluid px-2 px-md-4 py-2 py-md-4">
      {% include "includes/messages.html" %}
      
      <div class="fade-in" style="animation-duration: 0.6s; animation-fill-mode: both;">
        {% block content %}{% endblock %}
      </div>
    </main>
    
    <!-- Footer -->
    <footer class="mt-5 py-4 text-center text-muted">
      <div class="container">
        <p>&copy; 2024 Waste Care. Making waste management sustainable and efficient.</p>
      </div>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
      // Optimized navigation functionality
      document.addEventListener('DOMContentLoaded', function() {
        // Add loading states to forms
        const forms = document.querySelectorAll('form');
        forms.forEach(form => {
          form.addEventListener('submit', function() {
            const submitBtn = form.querySelector('button[type="submit"]');
            if (submitBtn && !submitBtn.disabled) {
              submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
              submitBtn.disabled = true;
            }
          });
        });
        
        // Auto-hide alerts after 5 seconds
        const alerts = document.querySelectorAll('.alert');
        alerts.forEach(alert => {
          setTimeout(() => {
            alert.style.transition = 'opacity 0.3s';
            alert.style.opacity = '0';
            setTimeout(() => alert.remove(), 300);
          }, 5000);
        });
        
        // Simplified navbar scroll effect (throttled)
        const navbar = document.querySelector('.navbar');
        let ticking = false;
        
        window.addEventListener('scroll', function() {
          if (!ticking) {
            window.requestAnimationFrame(function() {
              const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
              
              if (scrollTop > 50) {
                navbar.classList.add('scrolled');
              } else {
                navbar.classList.remove('scrolled');
              }
              
              ticking = false;
            });
            ticking = true;
          }
        }, { passive: true });
        
        // Mobile menu auto-close on link click
        const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
        const navbarToggler = document.querySelector('.navbar-toggler');
        const navbarCollapse = document.querySelector('.navbar-collapse');
        
        if (navbarCollapse) {
          navLinks.forEach(link => {
            link.addEventListener('click', function() {
              if (window.innerWidth < 992) {
                navbarCollapse.classList.remove('show');
                if (navbarToggler) {
                  navbarToggler.setAttribute('aria-expanded', 'false');
                }
              }
            });
          });
        }
      });
    </script>
    
    {% block extra_js %}{% endblock %}
  </body>
</html>
